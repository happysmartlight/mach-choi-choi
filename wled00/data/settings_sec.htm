<!DOCTYPE html>
<html lang="en">
<head>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
	<meta charset="utf-8">
	<title>Cรi ฤแบทt Bแบฃo mแบญt & Cแบญp nhแบญt</title>
	<style> html { visibility: hidden; } </style> <!-- prevent white & ugly display while loading, unhidden in loadResources() -->
	<script>
		// load common.js with retry on error
		(function loadFiles() {
			const l = document.createElement('script');
			l.src = 'common.js';
			l.onload = () => loadResources(['style.css'], S); // load style.css then call S()
			l.onerror = () => setTimeout(loadFiles, 100);
			document.head.appendChild(l);
		})();
		function U() { window.open(getURL("/update"),"_self"); }
		function checkNum(o) {
			const specialkeys = ["Backspace", "Tab", "Enter", "Shift", "Control", "Alt", "Pause", "CapsLock", "Escape", "Space", "PageUp", "PageDown", "End", "Home", "ArrowLeft", "ArrowUp", "ArrowRight", "ArrowDown", "Insert", "Delete"];
			// true if key is a number or a special key
			if(event.key.match(/[0-9]/) || specialkeys.includes(event.key)) return true;
			event.preventDefault();
			return false;
		}
		function setBckFilename(x) {
			x.setAttribute("download","HSL_ARGB_" + x.getAttribute("download") + (sd=="WLED"?"":("_" +sd)));
		}
		function S() {
			getLoc();
			if (loc) {
				gId("bckcfg").setAttribute('href',getURL(gId("bckcfg").pathname));
				gId("bckpresets").setAttribute('href',getURL(gId("bckpresets").pathname));
			}
			loadJS(getURL('/settings/s.js?p=6'), false, undefined, ()=>{
				setBckFilename(gId("bckcfg"));
				setBckFilename(gId("bckpresets"));
			});	// If we set async false, file is loaded and executed, then next statement is processed
			if (loc) d.Sf.action = getURL('/settings/sec');
		}
	</script>
</head>
<body>
	<form id="form_s" name="Sf" method="post">
		<div class="toprow">
		<!-- <div class="helpB"><button type="button" onclick="H('features/settings/#security-settings')">?</button></div> -->
		<button type="button" onclick="B()">๐ Quay lแบกi</button>
		<button type="submit">๐พ Lฦฐu</button>
		<button type="button" onclick="window.location.href='/edit'">๐ Quแบฃn lรฝ tแปp</button>
		<hr>
		</div>
		<h2>Bแบฃo mแบญt & Cแบญp nhแบญt</h2>
		<div class="warn">&#9888; Bแป trแปng vร Lฦฐu nแบฟu khรดng muแปn sแปญ dแปฅng mรฃ PIN!</div>
		<label for="PIN" style="font-weight:bold; color:#e0e0e0;">Mรฃ PIN cรi ฤแบทt:</label>
		<input
		type="password"
		id="PIN"
		name="PIN"
		size="6"
		maxlength="4"
		minlength="4"
		onkeydown="checkNum(this)"
		pattern="[0-9]*"
		inputmode="numeric"
		title="Vui lรฒng nhแบญp mรฃ gแปm 4 chแปฏ sแป"
		style="
			letter-spacing: 0.5em;
			text-align: center;
			font-size: 1.3em;
			padding: 8px 16px;
			border: 1px solid #555;
			border-radius: 8px;
			width: 220px; /* Tฤng chiแปu rแปng */
			box-sizing: border-box;
			margin: 8px 0 12px 8px;
			background: #1e1e2a;
			color: #e0e0e0;
			transition: border-color 0.2s, box-shadow 0.2s;
		"
		onfocus="this.style.borderColor='#3498db'; this.style.boxShadow='0 0 8px rgba(52,152,219,0.5)';"
		onblur="this.style.borderColor='#555'; this.style.boxShadow='none';"
		/>
		<br>

		<div class="warn">&#9888; Truyแปn tแบฃi khรดng mรฃ hรณa. Hรฃy cแบฉn trแปng khi chแปn mรฃ PIN, KHรNG sแปญ dแปฅng mรฃ PIN ngรขn hรng, cแปญa, SIM, v.v.!</div><br>
		Khรณa cแบญp nhแบญt phแบงn mแปm khรดng dรขy (OTA): <input type="checkbox" name="NO"><br>
		Mแบญt khแบฉu OTA: <input type="password" name="OP" maxlength="32"><br>
		ฤแป bแบญt OTA, vรฌ lรฝ do bแบฃo mแบญt bแบกn cแบงn nhแบญp ฤรบng mแบญt khแบฉu!<br>
		Nรชn thay ฤแปi mแบญt khแบฉu khi bแบญt OTA.<br>
		<b>Hรฃy tแบฏt OTA khi khรดng sแปญ dแปฅng, nแบฟu khรดng kแบป tแบฅn cรดng cรณ thแป nแบกp lแบกi phแบงn mแปm thiแบฟt bแป!</b><br>
		<i>Cรกc cรi ฤแบทt trรชn trang nรy chแป cรณ thแป thay ฤแปi nแบฟu OTA chฦฐa bแป khรณa!</i><br>
		Tแปซ chแปi truy cแบญp cรi ฤแบทt WiFi nแบฟu ฤรฃ khรณa: <input type="checkbox" name="OW"><br><br>
		
		<h3>ฤแบทt lแบกi thiแบฟt bแป</h3>
		Khรดi phแปฅc cรi ฤแบทt gแปc: <input type="checkbox" name="RS"><br>
		<div class="warn">&#9888; Tแบฅt cแบฃ cรi ฤแบทt vร preset sแบฝ bแป xรณa.<br><br>
		
		<div class="warn">&#9888; Truyแปn tแบฃi khรดng mรฃ hรณa. Kแบป tแบฅn cรดng cรนng mแบกng cรณ thแป chแบทn dแปฏ liแปu biแปu mแบซu!</div>
		<span id="OTA"><hr>
		<h3>Cแบญp nhแบญt phแบงn mแปm</h3>
		<button type="button" onclick="U()">Cแบญp nhแบญt OTA thแปง cรดng</button><br>
		<div id="aOTA">Bแบญt ArduinoOTA: <input type="checkbox" name="AO"></div>
		Chแป cho phรฉp cแบญp nhแบญt tแปซ cรนng mแบกng/WiFi: <input type="checkbox" name="SU"><br>
		<i class="warn">&#9888; Nแบฟu bแบกn sแปญ dแปฅng nhiแปu VLAN (vรญ dแปฅ: mแบกng IoT hoแบทc khรกch), hรฃy ฤแบทt mรฃ PIN hoแบทc tแบฏt tรนy chแปn nรy.<br>
			Tแบฏt tรนy chแปn nรy sแบฝ lรm thiแบฟt bแป cแปงa bแบกn kรฉm an toรn hฦกn.</i><br></span>
		<hr id="backup">
		<h3>Sao lฦฐu & Khรดi phแปฅc</h3>
		<div class="warn">&#9888; Khรดi phแปฅc preset/cแบฅu hรฌnh sแบฝ GHI ฤร preset/cแบฅu hรฌnh hiแปn tแบกi cแปงa bแบกn.<br>
		Tแบฃi lรชn sai hoแบทc cแบฅu hรฌnh khรดng ฤรบng cรณ thแป yรชu cแบงu ฤแบทt lแบกi thiแบฟt bแป hoแบทc nแบกp lแบกi firmware cho ESP.<br>
		Vรฌ lรฝ do bแบฃo mแบญt, mแบญt khแบฉu sแบฝ khรดng ฤฦฐแปฃc sao lฦฐu.</div>
		<a class="btn lnk" id="bckcfg" href="/presets.json" download="presets">Sao lฦฐu preset</a><br>
		<div>Khรดi phแปฅc preset<br><input type="file" name="data" accept=".json"> <button type="button" onclick="uploadFile(d.Sf.data,'/presets.json');">Tแบฃi lรชn</button><br></div><br>
		<a class="btn lnk" id="bckpresets" href="/cfg.json" download="cfg">Sao lฦฐu cแบฅu hรฌnh</a><br>
		<div>Khรดi phแปฅc cแบฅu hรฌnh<br><input type="file" name="data2" accept=".json"> <button type="button" onclick="uploadFile(d.Sf.data2,'/cfg.json');">Tแบฃi lรชn</button><br></div>
		<hr>
		Phiรชn bแบฃn cรi ฤแบทt: <span class="sip">ARGB HSL ##VERSION##</span><hr>
		<div id="toast"></div>
		<button type="button" onclick="B()">๐ Quay lแบกi</button>
		<button type="submit">๐พ Lฦฐu</button>
		<button type="button" onclick="window.location.href='/edit'">๐ Quแบฃn lรฝ tแปp</button>
	</form>
</body>
</html>
